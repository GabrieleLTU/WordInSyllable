<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lists</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
</head>
<body>
<div class="container contactform center " id="home" style="min-height: calc(100% - 200px);">

    <div class="center">

        <h4>Word List</h4>
        <div class="center">
            <li class="pagination"><a onclick="wordList()">Word List</a></li>
            <li class="pagination"><a onclick="syllableList()">Syllable List</a></li>
            </ul>
        </div>

        <!--<a href="javascript:window.history.go(-1);" class="btn btn-primary btn-dif">back</a>-->
        <div><div id="tableName"></div></div>


    </div>
</div>
<div id="wordData"></div>
<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<script>
    function syllableList()
    {
        $.ajax({
            type:"GET",
            url: "http://application.local/syllable/",
            success: function(data) {
                console.log(event);
                // alert('success');
                //createTable (data);
                CreateTableFromJSON(data);
                //$("body").append(JSON.stringify(data));
            },
            error: function(jqXHR, textStatus, errorThrown) {
                console.log(jqXHR, textStatus, errorThrown);
            },
            dataType: "json"
        });
    }

    function wordList() {
        $.ajax({
            type: "GET",
            url: "http://application.local/word/",
            success: function (data) {
                console.log(event);
                // alert('success');
                //createTable (data);
                CreateTableFromJSON(data);
                //$("body").append(JSON.stringify(data));
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log(jqXHR, textStatus, errorThrown);
            },
            dataType: "json"
        });
    }

    function CreateTableFromJSON(data) {
        var col = [];
        for (var i = 0; i < data.length; i++) {
            for (var key in data[i]) {
                if (col.indexOf(key) === -1) {
                    col.push(key);
                }
            }
        }
        col.push("Update");col.push("Delete");

        var table = document.createElement("table");

        var tr = table.insertRow(-1);                   // TABLE ROW.

        for (var i = 0; i < col.length; i++) {
            var th = document.createElement("th");      // TABLE HEADER.
            th.innerHTML = col[i];
            tr.appendChild(th);
        }

        // ADD JSON DATA TO THE TABLE AS ROWS.
        for (var i = 0; i < data.length; i++) {

            tr = table.insertRow(-1);

            for (var j = 0; j < col.length-2; j++) {
                var tabCell = tr.insertCell(-1);
                tabCell.innerHTML = data[i][col[j]];
            }
            var tabCell = tr.insertCell(-1);
            tabCell.innerHTML = "update";
            var tabCell = tr.insertCell(-1);
            tabCell.innerHTML = "<a onclick='deleteElement(table, id)'>delete</a>";
        }

        // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
        var divContainer = document.getElementById("wordData");
        divContainer.innerHTML = "";
        divContainer.appendChild(table);
    }

    function deleteElement(table, id)
    {
        $.ajax({
            type: "DELETE",
            url: "http://application.local/" + table + "/" + id,
            success: function(data) {
                console.log(event);
                // alert('success');
                //createTable (data);
                CreateTableFromJSON(data);
                //$("body").append(JSON.stringify(data));
            },
            error: function(jqXHR, textStatus, errorThrown) {
                console.log(jqXHR, textStatus, errorThrown);
            },
            dataType: "json"
        });
    }
</script>

</body>
</html>


